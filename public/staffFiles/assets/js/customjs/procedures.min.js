$(document)['ready'](function() {
    var _0x2a8fx1 = 1;
    var _0x2a8fx2 = $('#procedureTable').DataTable({
        responsive: true,
        processing: true,
        serverSide: true,
        ajax: {
            url: globalRouteobtenerLista,
            type: 'get',
            data: {
                "\x65\x73\x74\x61\x62\x6C\x65": _0x2a8fx1
            },
            error: function(_0x2a8fx3, _0x2a8fx4, _0x2a8fx5) {}
        },
        language: {
            "\x75\x72\x6C": dataTablesLangEs
        },
        "\x63\x6F\x6C\x75\x6D\x6E\x73": [{
            data: 'DT_RowIndex'
        }, {
            data: 'image'
        }, {
            data: 'brand'
        }, {
            data: 'service'
        }, {
            data: 'procedure'
        }, {
            data: 'haspackage',
            className: 'center'
        }, {
            data: 'description'
        }, {
            data: 'active',
            className: 'center'
        }, {
            data: 'action',
            orderable: false,
            searchable: false,
            className: 'center'
        }],
        createdRow: function(_0x2a8fx6, _0x2a8fx7, _0x2a8fx8) {
            $(_0x2a8fx6)['addClass']('odd gradeX')
        }
    });
    $('#choice-service-select')['empty']()['attr']('placeholder', 'Select click here')['trigger']('change');
    $('#choice-service-select')['select2']({
        placeholder: 'Select click here',
        ajax: {
            url: globalRouteSearchService,
            type: 'post',
            dataType: 'json',
            data: function(_0x2a8fx9) {
                return {
                    search: _0x2a8fx9['term']
                }
            },
            processResults: function(_0x2a8fx7) {
                console['log']('data', _0x2a8fx7);
                return {
                    results: $['map'](_0x2a8fx7, function(_0x2a8fxa) {
                        return {
                            id: _0x2a8fxa['id'],
                            text: _0x2a8fxa['service']
                        }
                    })
                }
            },
            cache: true
        }
    });
    $(document)['on']('click', '#formSubmit', function() {
        $('.error')['html']('');
        var _0x2a8fx7 = $('#choice-service-select')['select2']('data');
        var _0x2a8fxb = new FormData();
        if (_0x2a8fx7['length'] > 0) {
            _0x2a8fxb['append']('service', _0x2a8fx7[0]['id'])
        };
        _0x2a8fxb['append']('procedure_en', $('#procedure_en')['val']());
        _0x2a8fxb['append']('procedure_es', $('#procedure_es')['val']());
        _0x2a8fxb['append']('has_package', $('input[name=\'has_package\']:checked')['val']());
        _0x2a8fxb['append']('description_en', $('#description_en')['val']());
        _0x2a8fxb['append']('description_es', $('#description_es')['val']());
        _0x2a8fxb['append']('image', $('#image')['prop']('files')[0]);
        $['ajax']({
            url: globalRouteStore,
            method: 'POST',
            data: _0x2a8fxb,
            dataType: 'JSON',
            contentType: false,
            cache: false,
            headers: {
                '\x58\x2D\x43\x53\x52\x46\x2D\x54\x4F\x4B\x45\x4E': $('meta[name="csrf-token"]')['attr']('content')
            },
            processData: false,
            beforeSend: function() {},
            success: function(_0x2a8fx7) {
                console['log']('data', _0x2a8fx7);
                Toast['fire']({
                    icon: _0x2a8fx7['icon'],
                    title: _0x2a8fx7['msg']
                });
                if (_0x2a8fx7['reload']) {
                    _0x2a8fx2['ajax']['reload'](null, false);
                    toServer();
                    _0x2a8fx16()
                } else {
                    $['each'](_0x2a8fx7['errors'], function(_0x2a8fxc, _0x2a8fxd) {
                        kFormat = _0x2a8fxc['replace']('.', '_');
                        fFormat = kFormat['replace']('.', '_');
                        $('*[id^=' + fFormat + ']')['parent']()['find']('.error')['append']('<p>' + _0x2a8fxd + '</p>');
                        $('*[id^=' + fFormat + ']')['parents']('.cloned')['find']('.error')['append']('<p>' + _0x2a8fxd + '</p>')
                    })
                }
            },
            error: function(_0x2a8fxe) {
                console['log']('err', _0x2a8fxe)
            },
            complete: function() {}
        })
    });
    $(document)['on']('click', '.table-active', function(_0x2a8fxf) {
        _0x2a8fxf['preventDefault']();
        var _0x2a8fxb = new FormData();
        _0x2a8fxb['append']('id', $(this)['attr']('attr-id'));
        $['ajax']({
            url: globalRouteActivar,
            method: 'POST',
            data: _0x2a8fxb,
            dataType: 'JSON',
            contentType: false,
            cache: false,
            headers: {
                '\x58\x2D\x43\x53\x52\x46\x2D\x54\x4F\x4B\x45\x4E': $('meta[name="csrf-token"]')['attr']('content')
            },
            processData: false,
            beforeSend: function() {},
            success: function(_0x2a8fx7) {
                Toast['fire']({
                    icon: _0x2a8fx7['icon'],
                    title: _0x2a8fx7['msg']
                });
                if (_0x2a8fx7['reload']) {
                    _0x2a8fx2['ajax']['reload'](null, false);
                    toServer()
                }
            },
            complete: function() {}
        })
    });
    $(document)['on']('click', '.tbl-edit', function(_0x2a8fxf) {
        var _0x2a8fx10 = $(this)['attr']('data-id');
        var _0x2a8fxb = new FormData();
        _0x2a8fxb['append']('id', _0x2a8fx10);
        $['ajax']({
            url: globalRouteEditar,
            method: 'POST',
            data: _0x2a8fxb,
            dataType: 'JSON',
            contentType: false,
            cache: false,
            headers: {
                '\x58\x2D\x43\x53\x52\x46\x2D\x54\x4F\x4B\x45\x4E': $('meta[name="csrf-token"]')['attr']('content')
            },
            processData: false,
            beforeSend: function() {
                clearDropify()
            },
            success: function(_0x2a8fx7) {
                if (_0x2a8fx7['success']) {
                    var _0x2a8fx11;
                    if (_0x2a8fx7['info']['image_one']) {
                        _0x2a8fx11 = window['location']['origin'] + '/' + _0x2a8fx7['info']['image_one']['image']
                    } else {
                        _0x2a8fx11 = ''
                    };
                    _0x2a8fx16();
                    $('form')['attr']('procedure', _0x2a8fx7['info']['id']);
                    drEvents['settings']['defaultFile'] = _0x2a8fx11;
                    drEvents['destroy']();
                    drEvents['init']();
                    if (_0x2a8fx7['info']['image_one']) {
                        $('#image')['attr']('data-id', _0x2a8fx7['info']['image_one']['id']);
                        $('#image')['attr']('data-code', _0x2a8fx7['info']['image_one']['code'])
                    };
                    $('#formSubmit')['html']('edit')['attr']({
                        procedure: $['trim'](_0x2a8fx10),
                        id: 'formEdit'
                    });
                    var _0x2a8fx12 = new Option(_0x2a8fx7['info']['service']['service'], _0x2a8fx7['info']['service']['id'], true, true);
                    console['log']('newOption', _0x2a8fx12);
                    $('#choice-service-select')['append'](_0x2a8fx12)['trigger']('change');
                    $('#procedure_en')['val'](_0x2a8fx7['info']['procedure_en']);
                    $('#procedure_es')['val'](_0x2a8fx7['info']['procedure_es']);
                    $('input[type=\'radio\'][name=\'has_package\'][value=\'' + _0x2a8fx7['info']['has_package'] + '\']')['attr']('checked', true);
                    if (_0x2a8fx7['info']['description_one']) {
                        $('#description_en')['summernote']('code', _0x2a8fx7['info']['description_one']['description_en']);
                        $('#description_es')['summernote']('code', _0x2a8fx7['info']['description_one']['description_es'])
                    }
                } else {
                    Toast['fire']({
                        icon: _0x2a8fx7['icon'],
                        title: _0x2a8fx7['msg']
                    });
                    _0x2a8fx2['ajax']['reload'](null, false);
                    toServer();
                    _0x2a8fx16()
                }
            },
            error: function(_0x2a8fxe) {
                console['log']('err', _0x2a8fxe)
            },
            complete: function() {}
        })
    });
    $(document)['on']('click', '#formEdit', function(_0x2a8fxf) {
        $('.error')['html']('');
        var _0x2a8fx7 = $('#choice-service-select')['select2']('data');
        var _0x2a8fxb = new FormData();
        if (_0x2a8fx7['length'] > 0) {
            _0x2a8fxb['append']('service', _0x2a8fx7[0]['id'])
        };
        _0x2a8fxb['append']('id', $(this)['attr']('procedure'));
        _0x2a8fxb['append']('procedure_en', $('#procedure_en')['val']());
        _0x2a8fxb['append']('procedure_es', $('#procedure_es')['val']());
        _0x2a8fxb['append']('has_package', $('input[name=\'has_package\']:checked')['val']());
        _0x2a8fxb['append']('description_en', $('#description_en')['val']());
        _0x2a8fxb['append']('description_es', $('#description_es')['val']());
        _0x2a8fxb['append']('image', $('#image')['prop']('files')[0]);
        _0x2a8fxb['append']('id_image', $('#image')['attr']('data-id'));
        $['ajax']({
            url: globalRouteUpdate,
            method: 'POST',
            data: _0x2a8fxb,
            dataType: 'JSON',
            contentType: false,
            cache: false,
            headers: {
                '\x58\x2D\x43\x53\x52\x46\x2D\x54\x4F\x4B\x45\x4E': $('meta[name="csrf-token"]')['attr']('content')
            },
            processData: false,
            beforeSend: function() {},
            success: function(_0x2a8fx7) {
                console['log'](_0x2a8fx7);
                Toast['fire']({
                    icon: _0x2a8fx7['icon'],
                    title: _0x2a8fx7['msg']
                });
                if (_0x2a8fx7['reload']) {
                    _0x2a8fx2['ajax']['reload'](null, false);
                    toServer();
                    _0x2a8fx16()
                } else {
                    $['each'](_0x2a8fx7['errors'], function(_0x2a8fxc, _0x2a8fxd) {
                        $('*[id^=' + _0x2a8fxc + ']')['parent']()['find']('.error')['append']('<p>' + _0x2a8fxd + '</p>')
                    })
                }
            },
            error: function(_0x2a8fxe) {
                console['log']('err', _0x2a8fxe)
            },
            complete: function() {}
        })
    });
    $(document)['on']('click', '.eliminar', function(_0x2a8fx13) {
        _0x2a8fx13['preventDefault']();
        var _0x2a8fx14 = $(this)['attr']('data-id');
        Swal['fire']({
            title: '\xBFEsta seguro?',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si, borrarlo!'
        })['then']((_0x2a8fx15) => {
            if (_0x2a8fx15['value']) {
                _0x2a8fx17(_0x2a8fx14)
            } else {
                if (_0x2a8fx15['dismiss']) {
                    Swal['fire']('Cancelado!', 'Ningun registro fue eliminado.', 'error');
                    _0x2a8fx13['preventDefault']();
                    _0x2a8fx13['stopPropagation']()
                }
            }
        })
    });
    $(document)['on']('click', '#formCancel', function() {
        _0x2a8fx16()
    });
    $(document)['on']('click', '.dropify-clear', function(_0x2a8fxf) {
        _0x2a8fxf['preventDefault']();
        var _0x2a8fxb = new FormData();
        _0x2a8fxb['append']('id_image', $('#image')['attr']('data-id'));
        _0x2a8fxb['append']('id_code', $('#image')['attr']('data-code'));
        _0x2a8fxb['append']('procedure', $('form')['attr']('procedure'));
        $['ajax']({
            url: globalRouteDeleteFile,
            method: 'POST',
            data: _0x2a8fxb,
            dataType: 'JSON',
            contentType: false,
            cache: false,
            headers: {
                '\x58\x2D\x43\x53\x52\x46\x2D\x54\x4F\x4B\x45\x4E': $('meta[name="csrf-token"]')['attr']('content')
            },
            processData: false,
            beforeSend: function() {},
            success: function(_0x2a8fx7) {
                _0x2a8fx2['ajax']['reload'](null, false);
                socket['emit']('updateDataTablesToServer')
            },
            error: function(_0x2a8fxe) {
                console['log']('err', _0x2a8fxe)
            },
            complete: function() {}
        })
    });

    function _0x2a8fx16() {
        $('#brand')['val']('');
        $('#brand')['removeAttr']('data-id');
        $('#service_en')['val']('');
        $('#service_es')['val']('');
        $('#qty_images')['val']('');
        $('#description_en')['summernote']('code', '');
        $('#description_es')['summernote']('code', '');
        $('.clone-area')['html']('');
        $('#formReset')['click']();
        $('#formEdit')['removeAttr']('procedure')['html']('Add')['attr']('id', 'formSubmit');
        $('.holi')['remove']();
        $('imagePreview')['parents']('.form-group')['hide']('fast');
        $('#image')['val']('');
        $('#choice-service-select')['val'](null)['trigger']('change');
        var _0x2a8fxd = 0;
        $('input[name=has_package][value=' + _0x2a8fxd + ']')['prop']('checked', true);
        clearDropify();
        $('#image')['removeAttr']('data-id')
    }

    function _0x2a8fx17(_0x2a8fx14) {
        var _0x2a8fxb = new FormData();
        _0x2a8fxb['append']('id', _0x2a8fx14);
        $['ajax']({
            url: globalRouteDestroy,
            method: 'POST',
            data: _0x2a8fxb,
            dataType: 'JSON',
            contentType: false,
            cache: false,
            headers: {
                '\x58\x2D\x43\x53\x52\x46\x2D\x54\x4F\x4B\x45\x4E': $('meta[name="csrf-token"]')['attr']('content')
            },
            processData: false,
            beforeSend: function() {},
            success: function(_0x2a8fx7) {
                console['log']('data', _0x2a8fx7);
                Toast['fire']({
                    icon: _0x2a8fx7['icon'],
                    title: _0x2a8fx7['msg']
                });
                if (_0x2a8fx7['reload']) {
                    _0x2a8fx2['ajax']['reload'](null, false);
                    toServer()
                }
            },
            error: function(_0x2a8fxe) {
                console['log']('err', _0x2a8fxe)
            },
            complete: function() {}
        })
    }
});
var toolBar = [
    ['para', ['ul', 'ol']],
    ['style', ['bold', 'italic', 'underline', 'clear']]
];
$('#description_en')['summernote']({
    placeholder: 'Description en',
    height: 150,
    minHeight: null,
    maxHeight: null,
    toolbar: toolBar
});
$('#description_es')['summernote']({
    placeholder: 'Description es',
    height: 150,
    minHeight: null,
    maxHeight: null,
    toolbar: toolBar
});

function clearDropify() {
    drEvents = drEvent['data']('dropify');
    drEvents['resetPreview']();
    drEvents['clearElement']()
}

function toServer() {
    socket['emit']('updateDataTablesToServer')
}
socket['on']('updateDataTablesToClient', () => {
    procedureTable['ajax']['reload'](null, false)
})